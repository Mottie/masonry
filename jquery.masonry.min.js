/*************************************************
**  jQuery Masonry version 1.3.2
**  Copyright David DeSandro, licensed MIT
**  http://desandro.com/resources/jquery-masonry
**************************************************/
(function(e){var n=e.event,o;n.special.smartresize={setup:function(){e(this).bind("resize",n.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",n.special.smartresize.handler)},handler:function(k,l){var g=this,d=arguments;k.type="smartresize";o&&clearTimeout(o);o=setTimeout(function(){jQuery.event.handle.apply(g,d)},l==="execAsap"?0:100)}};e.fn.smartresize=function(k){return k?this.bind("smartresize",k):this.trigger("smartresize",["execAsap"])};e.fn.masonry=function(k,l){var g= {getBricks:function(d,c,a){var b=a.itemSelector===undefined;c.$bricks=a.appendedContent===undefined?b?d.children():d.find(a.itemSelector):b?a.appendedContent:a.appendedContent.filter(a.itemSelector)},placeBrick:function(d,c,a,b,h){c=Math.min.apply(Math,a);for(var i=c+d.outerHeight(true),f=a.length,j=f,m=b.colCount+1-f;f--;)if(a[f]==c)j=f;d.applyStyle(h.fromBottom?{left:b.colW*j+b.posLeft,bottom:c}:{left:b.colW*j+b.posLeft,top:c},e.extend(true,{},h.animationOptions));for(f=0;f<m;f++)b.colY[j+f]=i}, setup:function(d,c,a){g.getBricks(d,a,c);if(a.masoned)a.previousData=d.data("masonry");a.colW=c.columnWidth===undefined?a.masoned?a.previousData.colW:a.$bricks.outerWidth(true):c.columnWidth;a.colCount=Math.floor(d.width()/a.colW);a.colCount=Math.max(a.colCount,1)},arrange:function(d,c,a){var b;if(!a.masoned||c.appendedContent!==undefined)a.$bricks.css("position","absolute");if(a.masoned){a.posTop=a.previousData.posTop;a.posLeft=a.previousData.posLeft}else{d.css("position","relative");var h=e(document.createElement("div")); d.prepend(h);a.posTop=Math.round(h.position().top);a.posLeft=Math.round(h.position().left);h.remove()}if(a.masoned&&c.appendedContent!==undefined){a.colY=a.previousData.colY;for(b=a.previousData.colCount;b<a.colCount;b++)a.colY[b]=a.posTop}else{a.colY=[];for(b=a.colCount;b--;)a.colY.push(a.posTop)}e.fn.applyStyle=a.masoned&&c.animate?e.fn.animate:e.fn.css;c.singleMode?a.$bricks.each(function(){var i=e(this);g.placeBrick(i,a.colCount,a.colY,a,c)}):a.$bricks.each(function(){var i=e(this),f=Math.ceil(i.outerWidth(true)/ a.colW);f=Math.min(f,a.colCount);if(f===1)g.placeBrick(i,a.colCount,a.colY,a,c);else{var j=a.colCount+1-f,m=[];for(b=0;b<j;b++){var p=a.colY.slice(b,b+f);m[b]=Math.max.apply(Math,p)}g.placeBrick(i,j,m,a,c)}});a.wallH=Math.max.apply(Math,a.colY);d.applyStyle({height:a.wallH-a.posTop},e.extend(true,[],c.animationOptions));a.masoned||setTimeout(function(){d.addClass("masoned")},1);l.call(a.$bricks);d.data("masonry",a)},resize:function(d,c,a){a.masoned=!!d.data("masonry");var b=d.data("masonry").colCount; g.setup(d,c,a);a.colCount!=b&&g.arrange(d,c,a)}};return this.each(function(){var d=e(this),c={};c.masoned=!!d.data("masonry");var a=c.masoned?d.data("masonry").options:{},b=e.extend({},e.fn.masonry.defaults,a,k),h=a.resizeable;c.options=b.saveOptions?b:a;l=l||function(){};g.getBricks(d,c,b);if(!c.$bricks.length)return this;g.setup(d,b,c);g.arrange(d,b,c);!h&&b.resizeable&&e(window).bind("smartresize.masonry",function(){g.resize(d,b,c)});h&&!b.resizeable&&e(window).unbind("smartresize.masonry")})}; e.fn.masonry.defaults={singleMode:false,columnWidth:undefined,itemSelector:undefined,appendedContent:undefined,fromBottom:false,saveOptions:true,resizeable:true,animate:false,animationOptions:{}}})(jQuery);
